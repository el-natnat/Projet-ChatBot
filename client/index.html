<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="style.css" />


    <script>
        document.addEventListener('DOMContentLoaded', init);

        function init() {

            modal = document.getElementById("newChatBotModal");
            inputTitle = document.getElementById("inputTitle");
            inputBrain = document.getElementById("inputBrain");





            newChatBotButton = document.getElementById("newChatBotButton");
            newChatBotButton.addEventListener("click", () => { modal.style.display = "block"; });

            addNewChatBotButton = document.getElementById("addNewTaskButton");
            addNewChatBotButton.addEventListener("click", createNewChatBot);


        }

        function createNewChatBot() { //Fonction appelée lorsqu'on valide le nom du ChatBot et le cerveau ont été renseigné
            console.log("Nouveau ChatBot créé");
            modal.style.display = "none";

            let myHeaders = new Headers();
            myHeaders.append('Content-Type', 'application/json');
            let payload = {
                title: inputTitle.value,
                cerveau: inputStatus.value
            };
            let myBody = JSON.stringify(payload);
            let myInit = {
                method: 'POST',
                headers: myHeaders,
                mode: 'cors',
                cache: 'default',
                body: myBody
            };
            let myURL = "http://localhost:3001/"; //URL du serveur qui va être lancé

            //launch the request
            fetch(myURL, myInit)
                .then((httpResponse) => {
                    return httpResponse.text();
                })
                .then((responseBody) => {
                    reloadList();
                    //clear fields
                    inputTitle.value = "";
                    inputStatus.value = "";
                    console.log(`response is ${responseBody}`);
                })
                .catch((err) => {
                    console.log(`ERROR : ${err}`);
                })

        }

    </script>

</head>

<body>
    <h1> Interface d'administration de ChatBots</h1>

    <button id="newChatBotButton">ADD A NEW CHATBOT</button>

    <div id="newChatBotModal" class="modal">

        <div class="modal-content">
            <h1>Create a new ChatBot</h1>
            <label for="inputTitle">Title:</label>
            <input type="text" id="inputTitle" name="title"></input>

            <p>
                <label>Choix du cerveau: </label>
                <input type="radio" name="choix_cerveau" id="cerveau1" />
                <label for="moins 15ans"> Cerveau 1 </label><br />
                <input type="radio" name="choix_cerveau" id="cerveau2" />
                <label for="15-25ans"> Cerveau 2 </label><br />

            </p>

            <button id="addNewChatBotButton">Add This ChatBot</button>
        </div>

    </div>
</body>